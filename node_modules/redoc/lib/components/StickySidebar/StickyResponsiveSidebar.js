"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var mobx_react_1 = require("mobx-react");
var React = require("react");
var RedocNormalizedOptions_1 = require("../../services/RedocNormalizedOptions");
var styled_components_1 = require("../../styled-components");
var OptionsProvider_1 = require("../OptionsProvider");
var ChevronSvg_1 = require("./ChevronSvg");
var Stickyfill;
if (typeof window !== 'undefined') {
    Stickyfill = require('stickyfill').default;
}
var stickyfill = Stickyfill && Stickyfill();
var StyledStickySidebar = styled_components_1.withProps(styled_components_1.default.div)(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  width: ", ";\n  background-color: ", ";\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n\n  transform: translateZ(0);\n\n  height: 100vh;\n  position: sticky;\n  position: -webkit-sticky;\n  top: 0;\n\n  ", ";\n"], ["\n  width: ", ";\n  background-color: ", ";\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n\n  transform: translateZ(0);\n\n  height: 100vh;\n  position: sticky;\n  position: -webkit-sticky;\n  top: 0;\n\n  ",
    ";\n"])), function (props) { return props.theme.menu.width; }, function (props) { return props.theme.menu.backgroundColor; }, styled_components_1.media.lessThan('small')(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n    position: fixed;\n    z-index: 20;\n    width: 100%;\n    background: #ffffff;\n    display: ", ";\n  "], ["\n    position: fixed;\n    z-index: 20;\n    width: 100%;\n    background: #ffffff;\n    display: ", ";\n  "])), function (props) { return (props.open ? 'flex' : 'none'); }));
var FloatingButton = styled_components_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n  outline: none;\n  user-select: none;\n  background-color: #f2f2f2;\n  color: ", ";\n  display: none;\n  cursor: pointer;\n  position: fixed;\n  right: 20px;\n  z-index: 100;\n  border-radius: 50%;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n  ", ";\n  bottom: 44px;\n\n  width: 60px;\n  height: 60px;\n  padding: 0 20px;\n"], ["\n  outline: none;\n  user-select: none;\n  background-color: #f2f2f2;\n  color: ", ";\n  display: none;\n  cursor: pointer;\n  position: fixed;\n  right: 20px;\n  z-index: 100;\n  border-radius: 50%;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n  ",
    ";\n  bottom: 44px;\n\n  width: 60px;\n  height: 60px;\n  padding: 0 20px;\n"])), function (props) { return props.theme.colors.main; }, styled_components_1.media.lessThan('small')(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n    display: flex;\n  "], ["\n    display: flex;\n  "]))));
var StickyResponsiveSidebar = /** @class */ (function (_super) {
    __extends(StickyResponsiveSidebar, _super);
    function StickyResponsiveSidebar() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.toggleNavMenu = function () {
            _this.props.menu.toggleSidebar();
        };
        return _this;
        // private closeNavMenu = () => {
        //   this.setState({ open: false });
        // };
    }
    StickyResponsiveSidebar.prototype.componentDidMount = function () {
        if (stickyfill) {
            stickyfill.add(this.stickyElement);
        }
    };
    StickyResponsiveSidebar.prototype.componentWillUnmount = function () {
        if (stickyfill) {
            stickyfill.remove(this.stickyElement);
        }
    };
    Object.defineProperty(StickyResponsiveSidebar.prototype, "scrollYOffset", {
        get: function () {
            var top;
            if (this.props.scrollYOffset !== undefined) {
                top = RedocNormalizedOptions_1.RedocNormalizedOptions.normalizeScrollYOffset(this.props.scrollYOffset)();
            }
            else {
                top = this.options.scrollYOffset();
            }
            return top + 'px';
        },
        enumerable: true,
        configurable: true
    });
    StickyResponsiveSidebar.prototype.render = function () {
        var _this = this;
        var top = this.scrollYOffset;
        var open = this.props.menu.sideBarOpened;
        var height = "calc(100vh - " + top + ")";
        return (React.createElement(React.Fragment, null,
            React.createElement(StyledStickySidebar, { open: open, className: this.props.className, style: { top: top, height: height }, 
                // tslint:disable-next-line
                innerRef: function (el) {
                    _this.stickyElement = el;
                } }, this.props.children),
            React.createElement(FloatingButton, { onClick: this.toggleNavMenu },
                React.createElement(ChevronSvg_1.AnimatedChevronButton, { open: open }))));
    };
    StickyResponsiveSidebar = __decorate([
        mobx_react_1.observer
    ], StickyResponsiveSidebar);
    return StickyResponsiveSidebar;
}(OptionsProvider_1.ComponentWithOptions));
exports.StickyResponsiveSidebar = StickyResponsiveSidebar;
var templateObject_2, templateObject_1, templateObject_4, templateObject_3;
//# sourceMappingURL=StickyResponsiveSidebar.js.map